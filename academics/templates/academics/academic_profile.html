{% extends "base.html" %}

{% load static %}

{% block extend_title %} - {{ academic.name }}{% endblock %}

{% block page_header %}
<div class="container">
    <div class="row">
        <h1 id="header" class="text-center text-uppercase mt-4">{{ academic.name }}{% if user.username == academic.username %}'S ACADEMIC HUB{% endif %}</h1>
        <p class="fs-4 text-center">
            {% if academic.level >= 80 %}
                <span>- SAGE -</span>
            {% elif academic.level < 80 and academic.level >= 60 %}
                <span>- SAVANT -</span>
            {% elif academic.level < 60 and academic.level >= 40 %}
                <span>- PROFESSOR -</span>
            {% elif academic.level < 40 and academic.level >= 20 %}
                <span>- ACADEMIC -</span>
            {% elif academic.level < 20 %}
                <span>- STUDENT -</span>
            {% endif %}
        </p>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-3 mt-2 text-center">
            <p><i class="fas fa-at fa-fw"></i>{{ academic.username }}</p>
        </div>
        <div class="col-sm-12 col-md-3 mt-2 text-center">
            <p> <i class="fas fa-pen fa-fw"></i> Articles: {{ academic.article_set.all.count }}</p>
        </div>
        <div class="col-sm-12 col-md-3 mt-2 text-center">
            <p><i class="fas fa-eye fa-fw"></i> Following: {{ academic.following.all.count }}</p>
        </div>
        <div class="col-sm-12 col-md-3 mt-2 text-center">
            <p><i class="far fa-eye fa-fw"></i> Followers: {{ follower_count }}</p>
        </div>
    </div>
    <hr class="py-0 my-0">
</div>
{% endblock %}

{% block content %}
    <div id="main-content" class="container">
        {% if user.username == academic.username and user.is_superuser %}
            {% include 'includes/articles.html' %}
        {% endif %}
        {% if user.username == academic.username and user.is_superuser %}
            {% include 'includes/proposals.html' %}
        {% endif %}
        {% if user.username == academic.username %}
            {% include 'includes/following.html' %}
        {% endif %}
        {% if user.username == academic.username %}
            {% include 'includes/followers.html' %}
        {% endif %}
        {% if user.username == academic.username %}
            {% include 'includes/order_history.html' %}
        {% endif %}
        {% if user.username == academic.username %}
            <hr class="py-0 my-0">
            <div class="row">
                <h2 class="text-center mt-3 pt-2">PERSONAL INFO</h2>
            </div>
        {% endif %}
        <div class="row">
            <div class="col-md-12 col-lg-6 my-5">
                <a class="profile-img" href="{{ academic.image.url }}" target="_blank">
                    <img class="profile-image" src="{{ academic.image.url }}"  alt="{{ academic.name }}">
                </a>
            </div>
            <div class="col-md-12 col-lg-6">
                {% if user.username == academic.username %}
                    {% include 'includes/profile.html' %}
                {% else %}
                    <div class="row">
                        <h2 class="text-center mt-3 pt-5">SUMMARY</h2>
                    </div>
                    <div class="row">
                        <p class="mt-4">{{ academic.about }}</p>
                    </div>
                    <div class="row">
                        <div class="col text-center mt-4">
                            {% if from_profile %}
                                <a class="btn btn-black my-3" href="{% url 'academic_profile' user.academic.id %}">
                                    <i class="fas fa-chevron-left"></i>
                                    Hub
                                </a>
                            {% else %}
                                <a class="btn btn-black my-3" href="{% url 'articles' %}">
                                    <i class="fas fa-chevron-left"></i>
                                    Articles
                                </a>
                            {% endif %}
                            {% if user.academic in followers or following == True %}
                                <a href="{% url 'unfollow' academic.id %}" class="btn btn-white my-3">Unfollow <strong>@{{ academic.username }}</strong></a>
                            {% elif user.academic not in followers or following == False %}
                                <a href="{% url 'follow' academic.id %}" class="btn btn-white my-3">Follow <strong>@{{ academic.username }}</strong></a>
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}